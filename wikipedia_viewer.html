<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Wikipedia Viewer</title>
  <style>
  	@import url('https://fonts.googleapis.com/css?family=Dosis|Open+Sans');

    img {
      float: left;
      padding: 20px;
    }
    .result_title {
    	font-size: 60px;
    	font-family: 'Dosis', sans-serif;
    }
    .extract_text {
    	font-size: 21px;
    	font-family: 'Open Sans', sans-serif;
    }
  </style>
</head>
<body>
<script src="https://code.jquery.com/jquery.min.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<script type="text/javascript">

$(document).ready(function() {
 // article search function

$("#getArticle").on("click", function() {
	// format url string + user search terms
	var origin = "https://en.wikipedia.org//w/api.php?action=query&format=json&prop=extracts%7Cpageimages&origin=*&titles=";
	var search_terms = document.getElementById("input_text").value;
	console.log(search_terms);
	var chain = "&redirects=1&formatversion=2&exsentences=2&exintro=1&explaintext=1&piprop=thumbnail&pithumbsize=300";


	// format user search terms
	var elem = search_terms.split(' ');
	var final_query = elem.join('+');

	// final url string
	var wikiAPI = origin + final_query + chain;

    $.getJSON(wikiAPI).done(function( data ) {
      console.log("data retrieved"); // reached the other side
      console.log(wikiAPI);
      
      // Display results header
      $(".results_header").html("<h3>Results:</h3>")

      // results data
    	var article = data.query.pages[0];
    	var articleTitle = article.title;
    	var extract = article.extract;
    	if (article.hasOwnProperty('thumbnail') == true) {
    		var thumb = article.thumbnail.source;
    		$(".art_thumb").html("<img src='" + thumb + "'>")
    	}
    	
        $(".art_title").html("<h1 class='result_title'>" + articleTitle + "</h1>");
        $(".art_desc").html("<div class='extract_text'>" + extract + "</div>");
        	
        	
       });
    });
});


  </script>


  <div class="container-fluid">
  <div id="about">
  <div class="container">
    <div class="section-title text-center center">
      <h2>Wikipedia Viewer</h2>
      <hr>
    </div>
    <div class="row">
      <div class="col-md-8 col-md-offset-2">
        <div class="about-text">
          <p>Type in a search terms and click Select to explore results for <a href="https://en.wikipedia.org/wiki/Main_Page">Wikipedia</a> articles . Or click <a href="https://en.wikipedia.org/wiki/Special:Random" target="_blank">here</a> for a random Wikipedia article.</p>
          <p class="text-center"><input type="text" id="input_text"></p>
          <p class="text-center"><a id="getArticle" class="btn btn-primary"><i class="fa fa-download"></i> Search</a></p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Display search results here -->
<div class="results_header"></div>
<div class="art_thumb"></div>
<div class="art_title"></div>
<div class="art_desc"></div>
<div class="art_text"></div>

</div>
</body>
</html>